parseft / setft
===============

parseft コマンドはファイル時刻を変更するための文字列を構文解析する parseft 関数、setft コマンドは解析したパラメータから時刻を計算する calcft 関数とファイルに時刻を設定する setft 関数のテスト用コマンドです。

parseft コマンドは引数に "2025-12-31" や "09:00:00" などの文字列を指定すると、構文解析して[ファイル時刻変更のパラメータ](#params)を出力します。一方、setft コマンドは最初の引数にファイル名、続けて parseft コマンドの出力を指定すると、ファイル時刻を変更します。ファイル名に `-` を指定すると、変更された時刻を 1601-01-01 00:00 UTC からの 100 ナノ秒、または、1970-01-01 00:00 UTC からの秒で表示します。

**使用法**

```
  parseft [OPTION]... STRING

  setft [OPTION]... FILE [WEEKDAY_NAME[,NUMBER]] DATETIME ["DST"|"ST"]
        YEAR MONTH DAY HOUR MINUTE SECOND NANOSECOND
```

setft コマンドではファイル時刻の変更元となる日時はシステムの現在時刻ですが、`-r` オプションでファイル名を指定した場合はその時刻になります。時刻を指定せずに曜日や日付を指定するか、年、月、日、時、分、秒、ナノ秒を指定しないかした場合、変更された時、分、秒、ナノ秒の値は `0` になります。

-------------------
<a id="params"></a>

**ファイル時刻変更のパラメータ**

parseft コマンドが出力し、setft コマンドが引数で受け取るファイル時刻変更のパラメータの詳細は以下の通りです。

- 曜日: 元となる日時から進める最初（後ろに `",N"` を付加した場合は `N` 番目）の曜日の英単語を指定、省略可
- 日時: 元となる日時を置き換える値を以下の順で指定、２つまで省略可
  - 日付: `"YYYY-MM-DD"` で指定、置き換えない場合は `"-0001-00-00"` を指定
  - 時刻: `"Thh:mm:ss"` で指定、後ろに `".nnnnnnn"`（GNU/Linux では `".nnnnnnnnn"`）の付加でナノ秒を指定
  - UTC からのオフセット: `"Z"`、`"+hhmm"`、`"-hhmm"` で指定、日付と時刻を指定しない場合は `"Z+hhmm"`、`"Z-hhmm"` で指定
- 夏時間の調整: 変更された時刻がローカルタイムゾーンで夏時間とする場合は `"DST"`、そうでない場合は `"ST"`を指定、[mktime](./mktime.md#spec) 関数で夏時間が有効かどうかを判断する場合は省略
- 年、月、日、時、分、秒、ナノ秒: 元となる日時を変更する相対的な値を指定、省略可
